<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <title>Home</title>
  <link rel="stylesheet" th:href="@{/css/index.css}">
  <!-- Fuente Google -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
<div th:replace="fragments/header_login :: header_login"></div>

<div class="carousel" aria-live="polite">
  <div class="carousel-image" aria-hidden="true"></div>

  <div class="carousel-black-overlay"></div>
  <h1 class="title">CABA PRO</h1>
</div>



<footer>
  <p>© 2025 CABA PRO</p>
</footer>

<script>
  (function() {
    const images = [
      '/Imageneshome/estadio.png',
      '/Imageneshome/torneo.png',
      '/Imageneshome/cancha.png',
      '/Imageneshome/encesta.png'
    ];

    // Tiempos (ms)
    const fadeDuration = 1500;     // duración de la transición (fade in/out)
    const imageVisible = 8000;     // cuánto se ve la imagen (≈8s)
    const blackFull = 3000;        // cuánto queda negro (≈3s)

    // Elementos
    const imageEl = document.querySelector('.carousel-image');
    const overlay = document.querySelector('.carousel-black-overlay');
    if (!imageEl || !overlay) return;

    overlay.style.transition = `opacity ${fadeDuration}ms cubic-bezier(0.22, 0.8, 0.24, 1)`;
    imageEl.style.transition = `opacity ${fadeDuration}ms ease-in-out`;

    images.forEach(src => {
      const img = new Image();
      img.src = src;
    });

    let current = 0;

    function setBackground(idx) {
      imageEl.style.backgroundImage = "url('" + images[idx] + "')";
    }

    function showImage(index) {
      setBackground(index);

      void overlay.offsetWidth;

      overlay.style.opacity = '0';

      setTimeout(() => {
        overlay.style.opacity = '1';

        setTimeout(() => {
          const next = (index + 1) % images.length;
          setBackground(next);

          setTimeout(() => {
            showImage(next);
          }, blackFull);

        }, fadeDuration);
      }, fadeDuration + imageVisible);
    }


    overlay.style.opacity = '1';
    setBackground(current);

    setTimeout(() => {
      showImage(current);
    }, 400);

    document.addEventListener('visibilitychange', function() {
      if (document.hidden) {
        if (overlay) overlay.style.opacity = '1';
      } else {
        setTimeout(() => {
          showImage(current);
        }, 300);
      }
    });
  })();
</script>
</body>
</html>
